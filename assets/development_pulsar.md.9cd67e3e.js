import{_ as s,c as n,o as a,a as e}from"./app.544fb1e3.js";const m='{"title":"Pulsar \u6D88\u606F\u683C\u5F0F","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u7528\u6237\u5143\u4FE1\u606F\u63A8\u9001","slug":"\u7528\u6237\u5143\u4FE1\u606F\u63A8\u9001"},{"level":2,"title":"\u5F39\u5E55\u63A5\u5165\u70B9","slug":"\u5F39\u5E55\u63A5\u5165\u70B9"},{"level":3,"title":"\u683C\u5F0F\u6837\u4F8B","slug":"\u683C\u5F0F\u6837\u4F8B"},{"level":3,"title":"\u5F39\u5E55\u6295\u653E\u7684\u5B9E\u73B0\u903B\u8F91","slug":"\u5F39\u5E55\u6295\u653E\u7684\u5B9E\u73B0\u903B\u8F91"},{"level":2,"title":"WebSocket API \u9274\u6743\u7EC6\u8282","slug":"websocket-api-\u9274\u6743\u7EC6\u8282"}],"relativePath":"development/pulsar.md","lastUpdated":1640337288149}',t={},p=e(`<h1 id="pulsar-\u6D88\u606F\u683C\u5F0F" tabindex="-1">Pulsar \u6D88\u606F\u683C\u5F0F <a class="header-anchor" href="#pulsar-\u6D88\u606F\u683C\u5F0F" aria-hidden="true">#</a></h1><h2 id="\u7528\u6237\u5143\u4FE1\u606F\u63A8\u9001" tabindex="-1">\u7528\u6237\u5143\u4FE1\u606F\u63A8\u9001 <a class="header-anchor" href="#\u7528\u6237\u5143\u4FE1\u606F\u63A8\u9001" aria-hidden="true">#</a></h2><p>\u6B64\u4E3A WebSocket \u63A5\u53E3\u3002</p><p><strong>\u63A5\u53E3\u8DEF\u5F84</strong>: <code>/websocket/reader/persistent/public/default/user_{room}?messageId=earliest&amp;token=YOUR_PULSAR_TOKEN</code></p><p>\u63A8\u9001\u4E0B\u884C\u6570\u636E\u4E2Dproperties\u5B57\u6BB5\u7C7B\u578B\u4E3AUserProperties\uFF0C\u63CF\u8FF0\u7528\u6237\u4FE1\u606F\u5143\u6570\u636E\uFF0C\u5982\u4E0B\uFF1A</p><ul><li><code>id</code> \u7528\u6237\u6807\u8BC6\u7B26\uFF0C\u4E0E\u5F39\u5E55\u663E\u793A\u5143\u6570\u636E\u5BF9\u5E94</li><li><code>nickname</code> \u7528\u6237\u5FAE\u4FE1\u6635\u79F0</li><li><code>headimgurl</code> \u7528\u6237\u5934\u50CFURL</li></ul><h2 id="\u5F39\u5E55\u63A5\u5165\u70B9" tabindex="-1">\u5F39\u5E55\u63A5\u5165\u70B9 <a class="header-anchor" href="#\u5F39\u5E55\u63A5\u5165\u70B9" aria-hidden="true">#</a></h2><p>\u6B64\u4E3A WebSocket \u63A5\u53E3\u3002</p><p><strong>\u63A5\u53E3\u8DEF\u5F84</strong>:</p><ul><li>Consumer\uFF08\u5B9E\u65F6\u5F39\u5E55\uFF09 <ul><li><code>/websocket/consumer/persistent/public/default/{room}/{subscription}</code></li></ul></li><li>Reader\uFF08\u5386\u53F2\u5F39\u5E55\uFF09 <ul><li><code>/websocket/reader/persistent/public/default/{room}?messageId=earliest&amp;token=YOUR_PULSAR_TOKEN</code></li></ul></li></ul><h3 id="\u683C\u5F0F\u6837\u4F8B" tabindex="-1">\u683C\u5F0F\u6837\u4F8B <a class="header-anchor" href="#\u683C\u5F0F\u6837\u4F8B" aria-hidden="true">#</a></h3><div class="language-javascript line-numbers-mode"><pre><code><span class="token punctuation">{</span>
    <span class="token string">&#39;messageId&#39;</span><span class="token operator">:</span> <span class="token string">&#39;CBAQAiAAMAE=&#39;</span> <span class="token comment">// \u4EC5\u7528\u4E8Eack</span>
    <span class="token string">&#39;payload&#39;</span><span class="token operator">:</span> <span class="token string">&#39;AAAA&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u65B0\u5F39\u5E55, AAAB\u8868\u793A\u5F39\u5E55\u66F4\u65B0</span>
    <span class="token string">&#39;properties&#39;</span><span class="token operator">:</span>
    <span class="token punctuation">{</span>
        <span class="token string">&#39;content&#39;</span><span class="token operator">:</span> <span class="token string">&#39;{content}&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;id&#39;</span><span class="token operator">:</span> <span class="token string">&#39;UMwXbJ7xE5xC4rJl8VZ8ZcUZ5n+qWs5I&#39;</span><span class="token punctuation">,</span> <span class="token comment">// base64\u968F\u673AID\uFF0C\u51E0\u4E4E\u4E0D\u53EF\u80FD\u78B0\u649E</span>
        <span class="token string">&#39;sender&#39;</span><span class="token operator">:</span> <span class="token string">&#39;user_{wx_openid}&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u7BA1\u7406\u5458\u5F39\u5E55\u4EE5admin_\u5F00\u5934</span>
        <span class="token string">&#39;permission&#39;</span><span class="token operator">:</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u5B57\u7B26\u4E32&#39;1&#39;\u8868\u793A\u5BA1\u6838\u901A\u8FC7\uFF0C\u5B57\u7B26\u4E32&#39;0&#39;\u8868\u793A\u5BA1\u6838\u4E0D\u901A\u8FC7</span>
        <span class="token string">&#39;color&#39;</span><span class="token operator">:</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">,</span> <span class="token comment">// &#39;undefined&#39;\u7531\u663E\u793A\u7AEF\u51B3\u5B9A, \u6216\u5341\u516D\u8FDB\u5236\u989C\u8272\u7801\u5982&#39;FFFFFF&#39;</span>
        <span class="token string">&#39;size&#39;</span><span class="token operator">:</span> <span class="token string">&#39;16pt&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;pos&#39;</span><span class="token operator">:</span> <span class="token string">&#39;rightleft&#39;</span><span class="token punctuation">,</span> <span class="token comment">// &#39;top&#39;, &#39;bottom&#39;, &#39;rightleft&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&#39;publishTime&#39;</span><span class="token operator">:</span> <span class="token string">&#39;2021-11-21T10:56:25.798Z&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;redeliveryCount&#39;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="\u5F39\u5E55\u6295\u653E\u7684\u5B9E\u73B0\u903B\u8F91" tabindex="-1">\u5F39\u5E55\u6295\u653E\u7684\u5B9E\u73B0\u903B\u8F91 <a class="header-anchor" href="#\u5F39\u5E55\u6295\u653E\u7684\u5B9E\u73B0\u903B\u8F91" aria-hidden="true">#</a></h3><ul><li>\u5982\u679C\u6743\u9650\u5B57\u6BB5\u662F&quot;0&quot;\uFF0C\u4E14\u4E3A\u5F39\u5E55\u66F4\u65B0\u8BF7\u6C42\uFF08AAAB\uFF09,\u7ACB\u523B\u64A4\u4E0B\u5BF9\u5E94\u5F39\u5E55</li><li>\u5982\u679C\u6743\u9650\u5B57\u6BB5\u662F&quot;1&quot;\uFF0C\u4E0D\u8BBA\u8BF7\u6C42\u7C7B\u578B\u662FAAAA\u8FD8\u662FAAAB\uFF0C\u90FD\u4F7F\u5F97\u6D88\u606F\u4F53\u4E2D\u5F39\u5E55\u4E0A\u5C4F</li></ul><h2 id="websocket-api-\u9274\u6743\u7EC6\u8282" tabindex="-1">WebSocket API \u9274\u6743\u7EC6\u8282 <a class="header-anchor" href="#websocket-api-\u9274\u6743\u7EC6\u8282" aria-hidden="true">#</a></h2><ul><li>\u5BA2\u6237\u7AEF/\u524D\u7AEF\u901A\u8FC7 dashboard \u7684 <code>client-login</code> \u63A5\u53E3\uFF0C\u4EE5\u623F\u95F4\u53F7\u548C\u5BC6\u7801\u6362\u53D6 Pulsar \u7684 JWT;</li><li>\u4EE5\u4E0A\u8FF0 JWT \u8FDE\u63A5 Pulsar; WebSocket \u7684 JWT \u901A\u8FC7 query \u53C2\u6570 <code>token</code> \u4F20\u9012</li></ul>`,16),o=[p];function l(r,c,i,u,d,k){return a(),n("div",null,o)}var h=s(t,[["render",l]]);export{m as __pageData,h as default};
