{"openapi":"3.0.2","info":{"title":"DanmakuItPanel","description":"# 管理面板\n\n“弹幕一下”平台的管理面板RESTful API.\n\n## Dependencies\n\n```shell\n$ pip install poetry\n$ poetry install # run with python 3.9\n```\n\n## 登录\n\n目前实现了通过微信扫码/GitHub/GitLab/TsinghuaGit进行的社交网络登录；在扫码后，会根据从微信获取的UnionID等信息，\n建立本地账户，并且签发相应的 Json Web Token.\n\n## 房间管理\n\n目前实现了房间的增加、列表、修改、删除等功能。和实时弹幕相关的功能由Apache Pulsar提供。\n\n## 登录\n\nClick for a login test.\n\n- [GitHub](/user/social-login/github/login)\n- [GitLab](/user/social-login/gitlab/login)\n- [GitLab Tsinghua](/user/social-login/gitlab3rd/login)","version":"0.1.0"},"paths":{"/user/social-login/github/login":{"get":{"tags":["user"],"summary":"Login Github","operationId":"login_github_user_social_login_github_login_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/user/social-login/github/auth":{"get":{"tags":["user"],"summary":"Auth Github","operationId":"auth_github_user_social_login_github_auth_get","responses":{"307":{"description":"redirect to frontend","content":{"application/json":{"schema":{}}}}}}},"/user/social-login/gitlab/login":{"get":{"tags":["user"],"summary":"Login Gitlab","operationId":"login_gitlab_user_social_login_gitlab_login_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/user/social-login/gitlab3rd/login":{"get":{"tags":["user"],"summary":"Login Gitlab 3Rd Party","operationId":"login_gitlab_3rd_party_user_social_login_gitlab3rd_login_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/user/social-login/gitlab/auth":{"get":{"tags":["user"],"summary":"Auth Gitlab","operationId":"auth_gitlab_user_social_login_gitlab_auth_get","responses":{"307":{"description":"redirect to frontend","content":{"application/json":{"schema":{}}}}}}},"/user/social-login/gitlab3rd/auth":{"get":{"tags":["user"],"summary":"Auth Gitlab 3Rd Party","operationId":"auth_gitlab_3rd_party_user_social_login_gitlab3rd_auth_get","responses":{"307":{"description":"redirect to frontend","content":{"application/json":{"schema":{}}}}}}},"/user/social-login/wechat":{"get":{"tags":["user"],"summary":"Connect To Wechat","operationId":"connect_to_wechat_user_social_login_wechat_get","parameters":[{"required":true,"schema":{"title":"Code","type":"string"},"name":"code","in":"query"}],"responses":{"307":{"description":"redirect to frontend","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user/me":{"get":{"tags":["user"],"summary":"User Information","operationId":"user_information_user_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"HTTPBearer":[]}]}},"/room/":{"get":{"tags":["room"],"summary":"List Room","operationId":"list_room_room__get","responses":{"200":{"description":"last 100 created rooms","content":{"application/json":{"schema":{"title":"Response List Room Room  Get","type":"array","items":{"$ref":"#/components/schemas/Room"}}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["room"],"summary":"Create Room","operationId":"create_room_room__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomCreation"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Room"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/room/{room_id}":{"get":{"tags":["room"],"summary":"Get Room","operationId":"get_room_room__room_id__get","parameters":[{"required":true,"schema":{"title":"Room Id","type":"string"},"name":"room_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Room"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["room"],"summary":"Delete Room","operationId":"delete_room_room__room_id__delete","parameters":[{"required":true,"schema":{"title":"Room Id","type":"string"},"name":"room_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomDeletal"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]},"patch":{"tags":["room"],"summary":"Modify Room","description":"uid, room_id and creation_time cannot be altered","operationId":"modify_room_room__room_id__patch","parameters":[{"required":true,"schema":{"title":"Room Id","type":"string"},"name":"room_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Room"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/room/{room_id}/client-login":{"get":{"tags":["room"],"summary":"Client Login Room","description":"Set `room_passcode` to HTTP Bearer; `pulsar_jwt` is then used for pulsar connection","operationId":"client_login_room_room__room_id__client_login_get","parameters":[{"required":true,"schema":{"title":"Room Id","type":"string"},"name":"room_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Room"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"Room":{"title":"Room","required":["name","uid","room_id","room_passcode","creation_time","pulsar_jwt","wechat_token"],"type":"object","properties":{"name":{"title":"Name","type":"string"},"uid":{"title":"Uid","type":"string"},"danmaku_enabled":{"title":"Danmaku Enabled","type":"boolean","default":true},"room_id":{"title":"Room Id","type":"string"},"room_passcode":{"title":"Room Passcode","type":"string"},"creation_time":{"title":"Creation Time","type":"string","format":"date-time"},"remote_censor":{"title":"Remote Censor","type":"boolean","default":true},"keyword_blacklist":{"title":"Keyword Blacklist","type":"array","items":{"type":"string"},"default":[]},"pulsar_jwt":{"title":"Pulsar Jwt","type":"string"},"wechat_token":{"title":"Wechat Token","type":"string"},"wechat_encrypted":{"title":"Wechat Encrypted","type":"boolean","default":false},"wechat_encryption_key":{"title":"Wechat Encryption Key","type":"string"}}},"RoomCreation":{"title":"RoomCreation","required":["name"],"type":"object","properties":{"name":{"title":"Name","type":"string"}}},"RoomDeletal":{"title":"RoomDeletal","required":["room_id"],"type":"object","properties":{"room_id":{"title":"Room Id","type":"string"}}},"RoomUpdate":{"title":"RoomUpdate","type":"object","properties":{"name":{"title":"Name","type":"string"},"danmaku_enabled":{"title":"Danmaku Enabled","type":"boolean","default":true},"remote_censor":{"title":"Remote Censor","type":"boolean","default":true},"keyword_blacklist":{"title":"Keyword Blacklist","type":"array","items":{"type":"string"},"default":[]},"wechat_token":{"title":"Wechat Token","type":"string"},"wechat_encrypted":{"title":"Wechat Encrypted","type":"boolean","default":false},"wechat_encryption_key":{"title":"Wechat Encryption Key","type":"string"}}},"User":{"title":"User","required":["username","uid"],"type":"object","properties":{"username":{"title":"Username","type":"string"},"avatar":{"title":"Avatar","type":"string"},"uid":{"title":"Uid","type":"string"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}